package communication;

import java.io.Serializable;
import java.util.HashSet;
import java.util.Set;

/**
 * An object encapsulating the set of keys relevant to
 * a client in a single round of message broadcasting.  All
 * of the included keys would be applied to a user-submitted
 * message on the client side before it is submitted to the
 * server for processing.  These are serializable, since they
 * are generated by the server and distributed to all clients
 * each round.
 * @author Sophie Dawson
 *
 */
public class DiningKeySet implements Serializable {
	private static final long serialVersionUID = 5671467559046189587L;
	private HashSet<DiningKey> keys = new HashSet<DiningKey>();
	
	public DiningKeySet() {
	}
	
	/**
	 * Adds a key to the keyset
	 * @param key The key to be added
	 */
	public void addKey(DiningKey key) {
		keys.add(key);
	}
	
	/**
	 * Returns the current set of keys
	 * @return A Set object containing all the keys
	 */
	public Set<DiningKey> getKeySet() {
		return keys;
	}
	
	public int sum() {
		if (keys != null) {
			int sum = 0;
			for (DiningKey k : keys) {
				if ( k.getKeyOp()==DiningKeyOp.ADD)
					sum += k.getKey();
				else
					sum -= k.getKey();
			}
			
			return sum;
		} else {
			return 0;
		}
	}

	public String toString() {
		String str = "[";
		for (DiningKey k : keys) {
			str = str + k.toString() + ",";
		}
		
		return str + "]";
	}
}
